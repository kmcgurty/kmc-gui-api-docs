<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Usage Guide - Kmc's Teardown GUI API</title> <link rel="shortcut icon" href="/kmc-gui-api-docs/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/kmc-gui-api-docs/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/kmc-gui-api-docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/kmc-gui-api-docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Usage Guide | Kmc’s Teardown GUI API</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Usage Guide" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="API reference and setup for Kmc_GUI.lua for the sandbox game Teardown." /> <meta property="og:description" content="API reference and setup for Kmc_GUI.lua for the sandbox game Teardown." /> <link rel="canonical" href="http://localhost:4000/kmc-gui-api-docs/docs/usage.html" /> <meta property="og:url" content="http://localhost:4000/kmc-gui-api-docs/docs/usage.html" /> <meta property="og:site_name" content="Kmc’s Teardown GUI API" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Usage Guide" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Usage Guide","url":"http://localhost:4000/kmc-gui-api-docs/docs/usage.html","description":"API reference and setup for Kmc_GUI.lua for the sandbox game Teardown.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/kmc-gui-api-docs/" class="site-title lh-tight"> Kmc's Teardown GUI API </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/kmc-gui-api-docs/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="http://localhost:4000/kmc-gui-api-docs/docs/usage.html" class="nav-list-link active">Usage Guide</a></li><li class="nav-list-item"><a href="http://localhost:4000/kmc-gui-api-docs/docs/api-reference.html" class="nav-list-link">API Reference</a></li><li class="nav-list-item"><a href="http://localhost:4000/kmc-gui-api-docs/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Kmc's Teardown GUI API" aria-label="Search Kmc's Teardown GUI API" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h1> <ol id="markdown-toc"> <li><a href="#menu-creation" id="markdown-toc-menu-creation">Menu Creation</a> <ol> <li><a href="#preparing-mainlua" id="markdown-toc-preparing-mainlua">Preparing main.lua</a></li> <li><a href="#creating-a-menu-with-buttons" id="markdown-toc-creating-a-menu-with-buttons">Creating a Menu With Buttons</a></li> <li><a href="#linking-a-button-to-another-menu-creating-a-sub-menu" id="markdown-toc-linking-a-button-to-another-menu-creating-a-sub-menu">Linking a Button to Another Menu (creating a sub-menu)</a></li> </ol> </li> <li><a href="#best-practices" id="markdown-toc-best-practices">Best Practices</a> <ol> <li><a href="#organization" id="markdown-toc-organization">Organization</a> <ol> <li><a href="#file-layout" id="markdown-toc-file-layout">File Layout</a></li> <li><a href="#variable-layout" id="markdown-toc-variable-layout">Variable Layout</a> <ol> <li><a href="#base_function_filelua" id="markdown-toc-base_function_filelua">Base_Function_File.lua</a></li> <li><a href="#example_function_filelua" id="markdown-toc-example_function_filelua">Example_function_file.lua</a></li> </ol> </li> </ol> </li> <li><a href="#recommended-folder-structure" id="markdown-toc-recommended-folder-structure">Recommended Folder Structure</a></li> </ol> </li> </ol> <p><br /></p> <p>While this guide is mostly geared towards programmers new to Lua and modding in general, I highly recommend you read <a href="#organization">Organization</a> for best practices in mod organization.</p> <p>If you find any mistakes, please let me know.</p> <h1 id="menu-creation"> <a href="#menu-creation" class="anchor-heading" aria-labelledby="menu-creation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Menu Creation </h1> <h2 id="preparing-mainlua"> <a href="#preparing-mainlua" class="anchor-heading" aria-labelledby="preparing-mainlua"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Preparing main.lua </h2> <p>To begin, we will need to add a few things to the <code class="language-plaintext highlighter-rouge">main.lua</code> file.</p> <p>At the very top, we need to include <code class="language-plaintext highlighter-rouge">kmc_gui.lua</code> and <code class="language-plaintext highlighter-rouge">helper.lua</code>. <code class="language-plaintext highlighter-rouge">helper.lua</code> is a small set a functions that assist with debugging and number manipulation that the GUI uses. If you have these files in folder that isn’t called <code class="language-plaintext highlighter-rouge">lib</code>, you will need to change it accordingly.</p> <p><em>Important note: if you misspell a file or point it to the wrong path, the mod will silently fail without you knowing. Keep this in mind to prevent future frustration.</em></p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span><span class="n">include</span> <span class="s2">"lib/kmc_gui.lua"</span>
<span class="o">#</span><span class="n">include</span> <span class="s2">"lib/helper.lua"</span>
</code></pre></div></div> <p>We will then need to add <code class="language-plaintext highlighter-rouge">GUI.tick()</code> to the <code class="language-plaintext highlighter-rouge">draw()</code> function that Teardown provides.</p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="nf">draw</span><span class="p">()</span>
    <span class="n">GUI</span><span class="p">.</span><span class="n">tick</span><span class="p">()</span>
<span class="k">end</span>
</code></pre></div></div> <p>Finally, we will need to set the keys that the menu is going to use. This can be done inside the <code class="language-plaintext highlighter-rouge">init()</code> function that Teardown provides. I recommend creating a function called <code class="language-plaintext highlighter-rouge">initGUI()</code> and storing all of the variables you use in a table.</p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
	<span class="n">g</span><span class="p">.</span><span class="n">initGUI</span><span class="p">()</span>
<span class="k">end</span>

<span class="n">g</span><span class="p">.</span><span class="n">initGUI</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">GUI</span><span class="p">.</span><span class="n">navButtons</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">menuOpen</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"m"</span><span class="p">},</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="s2">"main"</span>
        <span class="p">},</span>
        <span class="n">menuClose</span> <span class="o">=</span> <span class="p">{</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{}},</span>
        <span class="n">navUp</span> <span class="o">=</span> <span class="p">{</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"i"</span><span class="p">,</span> <span class="s2">"up"</span><span class="p">}},</span>
        <span class="n">navDown</span> <span class="o">=</span> <span class="p">{</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"k"</span><span class="p">,</span> <span class="s2">"down"</span><span class="p">}},</span>
        <span class="nb">select</span> <span class="o">=</span> <span class="p">{</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"l"</span><span class="p">,</span> <span class="s2">"return"</span><span class="p">,</span> <span class="s2">"right"</span><span class="p">}},</span>
        <span class="n">navBack</span> <span class="o">=</span> <span class="p">{</span><span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"j"</span><span class="p">,</span> <span class="s2">"left"</span><span class="p">}}</span>
    <span class="p">}</span>
    
    
    <span class="c1">--menu creation stuff goes here</span>
<span class="k">end</span>

</code></pre></div></div> <h2 id="creating-a-menu-with-buttons"> <a href="#creating-a-menu-with-buttons" class="anchor-heading" aria-labelledby="creating-a-menu-with-buttons"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Menu With Buttons </h2> <p>Below is how you would create a menu with buttons.</p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">g</span><span class="p">.</span><span class="n">menuX</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">g</span><span class="p">.</span><span class="n">menuY</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">g</span><span class="p">.</span><span class="n">buttonWidth</span> <span class="o">=</span> <span class="mi">225</span>
<span class="n">g</span><span class="p">.</span><span class="n">buttonHeight</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">g</span><span class="p">.</span><span class="n">buttonSpacing</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">g</span><span class="p">.</span><span class="n">fontSize</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">g</span><span class="p">.</span><span class="n">fontName</span> <span class="o">=</span> <span class="s2">"bold.ttf"</span>
<span class="n">g</span><span class="p">.</span><span class="n">saveLastButtonPos</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">GUI</span><span class="p">.</span><span class="n">createMenu</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="s2">"Mod Menu"</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuX</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuY</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonWidth</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonHeight</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonSpacing</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">saveLastButtonPos</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Player Menu &gt;"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="s2">"player_functions"</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Sub Menu 2 &gt;"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="s2">"submenu2"</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Empty Menu &gt;"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="s2">"emptymenu"</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Exit"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
</code></pre></div></div> <p>When calling <code class="language-plaintext highlighter-rouge">GUI.createMenu</code>, you must specify <code class="language-plaintext highlighter-rouge">menuName</code>, <code class="language-plaintext highlighter-rouge">prevMenu</code>, <code class="language-plaintext highlighter-rouge">title</code>, <code class="language-plaintext highlighter-rouge">menuX</code>, <code class="language-plaintext highlighter-rouge">menuY</code>, <code class="language-plaintext highlighter-rouge">buttonWidth</code>, <code class="language-plaintext highlighter-rouge">buttonHeight</code>, <code class="language-plaintext highlighter-rouge">buttonSpacing</code>, <code class="language-plaintext highlighter-rouge">fontSize</code>, <code class="language-plaintext highlighter-rouge">fontName</code>, <code class="language-plaintext highlighter-rouge">saveLastButtonPos</code>. All of these variables are explained under <a href="api-reference.html#guicreatemenu">GUI.createMenu(…)</a>.</p> <p>When calling <code class="language-plaintext highlighter-rouge">GUI.addButton</code>, you must specify <code class="language-plaintext highlighter-rouge">parentMenu</code>, <code class="language-plaintext highlighter-rouge">text</code>, <code class="language-plaintext highlighter-rouge">funct</code>, <code class="language-plaintext highlighter-rouge">args</code>, <code class="language-plaintext highlighter-rouge">toggleable</code>, <code class="language-plaintext highlighter-rouge">textScale</code>, <code class="language-plaintext highlighter-rouge">font</code>. All of these variables are explained under <a href="api-reference.html#guiaddbutton">GUI.addButton(…)</a>.</p> <p>It is helpful to store these variables in a table (with the exception of <code class="language-plaintext highlighter-rouge">menuName</code>, <code class="language-plaintext highlighter-rouge">prevMenu</code>). It lets you recall them later in your mod, and you don’t have to name them funny variables to keep track.</p> <p>Continue reading to <a href="#organization">Organization</a> for how everything plays together.</p> <h2 id="linking-a-button-to-another-menu-creating-a-sub-menu"> <a href="#linking-a-button-to-another-menu-creating-a-sub-menu" class="anchor-heading" aria-labelledby="linking-a-button-to-another-menu-creating-a-sub-menu"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linking a Button to Another Menu (creating a sub-menu) </h2> <p>It’s very helpful to have sub-menus to help break up different function groups. When you call <code class="language-plaintext highlighter-rouge">GUI.addButton</code>, you can feed it a callback function (the <code class="language-plaintext highlighter-rouge">funct</code> argument) - this is the function that gets called when the user presses select on it.</p> <p>It is recommended for a sub menu, that you add “ &gt;” to the end of whatever the button text says. This way it is clear it is a sub-menu, and not a function.</p> <p>The second argument in <code class="language-plaintext highlighter-rouge">GUI.createMenu</code> tells the API what menu it should navigate to when the user presses the <code class="language-plaintext highlighter-rouge">navBack</code> key when the user is in that menu. Notice below where we create <code class="language-plaintext highlighter-rouge">"player_functions"</code>, the second argument is <code class="language-plaintext highlighter-rouge">"main"</code>. There is no limit to the amount of sub-menus that you create, the only important part is that they point to each other in an order that makes logical sense (e.g. the user tries going back, and navigates to a totally unrelated vehicle menu).</p> <p>Setting the second argument to <code class="language-plaintext highlighter-rouge">nil</code> or <code class="language-plaintext highlighter-rouge">""</code> will close the menu when the user presses <code class="language-plaintext highlighter-rouge">navBack</code>.</p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">GUI</span><span class="p">.</span><span class="n">createMenu</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="s2">"Mod Menu"</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuX</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuY</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonWidth</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonHeight</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonSpacing</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">saveLastButtonPos</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Player Menu &gt;"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="s2">"player_functions"</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>

<span class="n">GUI</span><span class="p">.</span><span class="n">createMenu</span><span class="p">(</span><span class="s2">"player_functions"</span><span class="p">,</span> <span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Player Menu"</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuX</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuY</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonWidth</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonHeight</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonSpacing</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">saveLastButtonPos</span><span class="p">)</span>
<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"player_functions"</span><span class="p">,</span> <span class="s2">"Exit"</span><span class="p">,</span> <span class="n">GUI</span><span class="p">.</span><span class="n">setActiveMenu</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
</code></pre></div></div> <h1 id="best-practices"> <a href="#best-practices" class="anchor-heading" aria-labelledby="best-practices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Best Practices </h1> <h2 id="organization"> <a href="#organization" class="anchor-heading" aria-labelledby="organization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Organization </h2> <p>Once you’ve created a group of menus and each button has a dedicated function - things can become complicated rapidly without an organization standard. When you declare a global variable inside Lua, <em>any other included .lua file can access that variable</em>. As you can imagine, sometimes you have to create a variable with the same name. Naturally, this will create problems of variables writing over each other (thus creating hard-to-diagnose bugs, especially considering error handling in-game doesn’t give a full stack trace at the time of writing). This is where the idea of separating everything into tables comes into play. This isn’t quite object-oriented programming - more like a distant cousin.</p> <h3 id="file-layout"> <a href="#file-layout" class="anchor-heading" aria-labelledby="file-layout"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> File Layout </h3> <p>Let’s say we want to have 3 groups of functions in our mod: <code class="language-plaintext highlighter-rouge">player_functions</code>, <code class="language-plaintext highlighter-rouge">vehicle_functions</code>, <code class="language-plaintext highlighter-rouge">world_functions</code>. Inside the <code class="language-plaintext highlighter-rouge">/My Mod Menu/functions</code> folder, we create a <code class="language-plaintext highlighter-rouge">.lua</code> file for each of these functions (see <a href="#recommended-folder-structure">Recommended Folder Structure</a>).</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
└── Mod_Menu_Folder/
    └── functions/
        ├── player_functions.lua
        ├── vehicle_functions.lua
        └── world_functions.lua

</code></pre></div></div> <h3 id="variable-layout"> <a href="#variable-layout" class="anchor-heading" aria-labelledby="variable-layout"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Variable Layout </h3> <p>At the top of <code class="language-plaintext highlighter-rouge">player_functions.lua</code> we create a global table, and throughout the rest of the file, we add to that table. I recommend below as a base file:</p> <h4 id="base_function_filelua"> <a href="#base_function_filelua" class="anchor-heading" aria-labelledby="base_function_filelua"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Base_Function_File.lua </h4> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--player_functions.lua</span>

<span class="n">player_functions</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">player_functions</span><span class="p">.</span><span class="n">tick</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
	<span class="c1">--Do stuff every tick</span>
<span class="k">end</span>

<span class="n">player_functions</span><span class="p">.</span><span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
	<span class="c1">--Do stuff once when the mod has started</span>
<span class="k">end</span>
</code></pre></div></div> <p>Inside <a href="https://www.teardowngame.com/modding/#main.lua">main.lua</a> we can include <code class="language-plaintext highlighter-rouge">player_functions.lua</code>, then call <code class="language-plaintext highlighter-rouge">player_functions.tick</code> and <code class="language-plaintext highlighter-rouge">player_functions.init</code>. Note: for simplicity, I haven’t included setting up the menu.</p> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--main.lua</span>

<span class="o">#</span><span class="n">include</span> <span class="s2">"lib/kmc_gui.lua"</span>
<span class="o">#</span><span class="n">include</span> <span class="s2">"lib/helper.lua"</span>

<span class="o">#</span><span class="n">include</span> <span class="s2">"functions/player_functions.lua"</span>

<span class="n">g</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
	<span class="n">g</span><span class="p">.</span><span class="n">initGUI</span><span class="p">()</span> <span class="c1">--see Menu Creation for what this should look like</span>

	<span class="n">player_functions</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">tick</span><span class="p">()</span>
	<span class="n">player_functions</span><span class="p">.</span><span class="n">tick</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">draw</span><span class="p">()</span>
    <span class="n">GUI</span><span class="p">.</span><span class="n">tick</span><span class="p">()</span>
<span class="k">end</span>
</code></pre></div></div> <p>After this, we can start adding functions and variables:</p> <h4 id="example_function_filelua"> <a href="#example_function_filelua" class="anchor-heading" aria-labelledby="example_function_filelua"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example_function_file.lua </h4> <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--player_functions.lua</span>

<span class="n">player_functions</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">player_functions</span><span class="p">.</span><span class="n">togglesomething</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
    <span class="k">if</span><span class="p">(</span><span class="n">GUI</span><span class="p">.</span><span class="n">isActiveButtonToggledOn</span><span class="p">())</span> <span class="k">then</span>
        <span class="n">player_functions</span><span class="p">.</span><span class="n">toggled</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">GUI</span><span class="p">.</span><span class="n">updateStatusText</span><span class="p">(</span><span class="s2">"Enabled some really cool function!"</span> <span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">player_functions</span><span class="p">.</span><span class="n">toggled</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="n">GUI</span><span class="p">.</span><span class="n">updateStatusText</span><span class="p">(</span><span class="s2">"Disabled some really cool function!"</span> <span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">DebugPrint</span><span class="p">(</span><span class="s2">"Toggle turned off!"</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">player_functions</span><span class="p">.</span><span class="n">tick</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
    <span class="k">if</span><span class="p">(</span><span class="n">player_functions</span><span class="p">.</span><span class="n">toggled</span><span class="p">)</span> <span class="k">then</span>
    	<span class="c1">--Do something every tick</span>
        <span class="n">DebugPrint</span><span class="p">(</span><span class="s2">"Toggle turned on!"</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">player_functions</span><span class="p">.</span><span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
	<span class="n">player_functions</span><span class="p">.</span><span class="n">toggled</span> <span class="o">=</span> <span class="kc">false</span>

	<span class="n">GUI</span><span class="p">.</span><span class="n">createMenu</span><span class="p">(</span><span class="s2">"player_functions"</span><span class="p">,</span> <span class="s2">"main"</span><span class="p">,</span> <span class="s2">"Player Functions"</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuX</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">menuY</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonWidth</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonHeight</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">buttonSpacing</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">saveLastButtonPos</span><span class="p">)</span>
	<span class="n">GUI</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"player_functions"</span><span class="p">,</span> <span class="s2">"Toggle"</span><span class="p">,</span> <span class="n">player_functions</span><span class="p">.</span><span class="n">togglesomething</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontSize</span><span class="p">,</span> <span class="n">g</span><span class="p">.</span><span class="n">fontName</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <h2 id="recommended-folder-structure"> <a href="#recommended-folder-structure" class="anchor-heading" aria-labelledby="recommended-folder-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recommended Folder Structure </h2> <p>It is recommended you follow this structure below. Any functions you add should go into the <code class="language-plaintext highlighter-rouge">functions/</code> folder. See (see <a href="#file-layout">File Details</a> for more details).</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
└── Mod_Menu_Folder/
    ├── lib/
    │   ├── helper.lua
    │   └── kmc_gui.lua
    ├── functions/
    │   ├── example1_functions.lua
    │   ├── example2_functions.lua
    │   └── example3_functions.lua
    ├── media/
    │   ├── tick_down.ogg
    │   └── tick_up.ogg
    ├── main.lua
    ├── info.txt
    └── options.lua (optional)
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
